---
import instagram from "../assets/instagram.svg";
import tiktok from "../assets/tiktok.svg";
---

<!-- Hero Section -->
<section id="inicio" class="relative overflow-hidden">
    <!-- Animated Background Elements -->
    <div class="absolute inset-0">
        <div
            class="absolute top-20 left-10 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float">
        </div>
        <div class="absolute top-40 right-10 w-72 h-72 bg-yellow-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float"
            style="animation-delay: 2s;">
        </div>
        <div class="absolute -bottom-8 left-20 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float"
            style="animation-delay: 4s;">
        </div>
    </div>
    <div class="relative container mx-auto px-6 py-20 text-center">
        <div class="max-w-4xl mx-auto">
            <!-- Main Headline -->
            <h1 class="text-5xl md:text-7xl font-black text-white mb-6 leading-tight">
                Mejora tu visibilidad en <span class="gradient-text">Redes Sociales</span>
                <br />
            </h1>
            <!-- Subheadline -->
            <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed">
                🔥 Aumenta tu popularidad en redes sociales con interacciones
                auténticas y seguras, gradualmente.
                <strong class="text-yellow-400">Crecimiento orgánico y transparente.</strong>
            </p>

            <!-- Platform Selection Icons -->
            <div class="flex justify-center space-x-6 mb-6">
                <button type="button" id="instagram-btn" onclick="selectPlatform('instagram')"
                    class="platform-btn outline-none flex flex-col items-center space-y-2 p-4 w-28 rounded-xl transition-all duration-300 hover:bg-white/10">
                    <img src={instagram.src} class="size-10" alt="" />
                    <span class="text-white text-sm font-medium">Instagram</span>
                </button>

                <button type="button" id="tiktok-btn" onclick="selectPlatform('tiktok')"
                    class="platform-btn outline-none active flex flex-col items-center space-y-2 p-4 w-28 rounded-xl transition-all duration-300 hover:bg-white/10 bg-gradient-to-r from-pink-500/30 to-purple-500/30 border-2 border-pink-400/50">
                    <img src={tiktok.src} class="size-10" alt="" />
                    <span class="text-white text-sm font-medium">TikTok</span>
                </button>
            </div>

            <!-- Hero Input Section -->
            <div class="max-w-2xl mx-auto mb-8">
                <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/30">
                    <form id="heroForm" class="flex flex-col sm:flex-row gap-4">
                        <div class="flex-1 relative">
                            <input maxlength="20" type="text" id="usernameInput" name="usernameInput"
                                placeholder="@ingresa usuario tiktok"
                                class="w-full px-6 py-4 text-lg bg-white20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300"
                                required />
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                <span id="platform-icon" class="text-2xl">🎵</span>
                            </div>
                        </div>

                        <button type="submit"
                            class="px-8 py-4 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white font-bold text-lg rounded-xl hover:scale-105 transform transition-all duration-300 shadow-2xl flex items-center justify-center space-x-2 whitespace-nowrap">
                            <span>Continuar</span>
                            <span>→</span>
                        </button>
                    </form>

                    <div class="flex items-center justify-center space-x-6 mt-4 text-sm text-gray-300">
                        <div class="flex items-center space-x-1">
                            <span class="text-green-400">✓</span>
                            <span>100% Seguro</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <span class="text-green-400">✓</span>
                            <span>Sin Bots</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <span class="text-green-400">✓</span>
                            <span>Resultados Reales</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="flex flex-wrap justify-center gap-8 mb-8">
                <div class="text-center">
                    <div class="text-3xl md:text-4xl font-bold text-yellow-400">
                        +2.5M
                    </div>
                    <div class="text-gray-300">Seguidores Entregados</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl md:text-4xl font-bold text-green-400">
                        98%
                    </div>
                    <div class="text-gray-300">Satisfacción</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl md:text-4xl font-bold text-blue-400">
                        24/7
                    </div>
                    <div class="text-gray-300">Soporte</div>
                </div>
            </div>
            <!-- CTA Button -->
            <div class="space-y-2">
                <p class="text-sm text-gray-400">
                    ⚡ Mejora tu presencia en redes sociales en poco tiempo
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Modal de Selección -->
<div id="followersModal"
    class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm">
    <div
        class="mx-4 w-full max-w-2xl h-[90%] overflow-y-scroll bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20 p-8 animate-scale-in">
        <!-- Modal Header -->
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">🚀</div>
            <h2 class="text-3xl font-bold text-white mb-2">¡Casi Listo!</h2>
            <p class="text-gray-300">
                Selecciona cuántos seguidores quieres y confirma tu email
            </p>
        </div>

        <!-- Selected Platform Info -->
        <div class="bg-white/5 rounded-xl p-4 mb-6 flex items-center justify-center space-x-3">
            <span class="text-2xl" id="modal-platform-icon">🎵</span>
            <span class="text-white font-medium">Usuario: <span id="modal-username" class="text-pink-300">
                </span>
            </span>
        </div>

        <form id="formFollowers" class="space-y-6">
            <!-- Followers Selection -->
            <div>
                <p class="block text-white font-medium mb-4 text-center">
                    👥 ¿Cuántos seguidores quieres?
                </p>
                <div id="PriceInsta" class="hidden grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button type="button" onclick="selectFollowers(500)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-white/20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">500</div>
                        <div class="text-xs text-blue-300 mt-1">BASIC</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">1.8€</div>
                            <div class="text-xs text-red-300 line-through">2.9€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(1000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">1K</div>
                        <div class="text-xs text-blue-300 mt-1">BASIC</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">3.8€</div>
                            <div class="text-xs text-red-300 line-through">5€</div>
                        </div>

                    </button>
                    <button type="button" onclick="selectFollowers(2500)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">2.5K</div>
                        <div class="text-xs text-blue-300 mt-1">BASIC</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">6.8€</div>
                            <div class="text-xs text-red-300 line-through">15€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(5000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">5K</div>
                        <div class="text-xs text-red-400 mt-1">MÁS POPULAR</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">12.8€</div>
                            <div class="text-xs text-red-300 line-through">20€</div>
                        </div>

                    </button>
                    <button type="button" onclick="selectFollowers(10000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">10K</div>
                        <div class="text-xs text-purple-300 mt-1">PREMIUM</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">25.8€</div>
                            <div class="text-xs text-red-300 line-through">58€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(20000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">20K</div>
                        <div class="text-xs text-purple-300 mt-1">PREMIUM</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">45.8€</div>
                            <div class="text-xs text-red-300 line-through">84.9€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(35000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">35K</div>
                        <div class="text-xs text-yellow-300 mt-1">VIP</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">52.90€</div>
                            <div class="text-xs text-red-300 line-through">204.9€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(50000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">50K</div>
                        <div class="text-xs text-yellow-300 mt-1">VIP</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">75.9€</div>
                            <div class="text-xs text-red-300 line-through">310.9€</div>
                        </div>
                    </button>
                </div>
                <div id="PriceTiktok" class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button type="button" onclick="selectFollowers(500)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-white/20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">500</div>
                        <div class="text-xs text-blue-300 mt-1">BASIC</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">2.8€</div>
                            <div class="text-xs text-red-300 line-through">3.9€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(1000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">1K</div>
                        <div class="text-xs text-blue-300 mt-1">BASIC</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">5.9€</div>
                            <div class="text-xs text-red-300 line-through">8€</div>
                        </div>

                    </button>
                    <button type="button" onclick="selectFollowers(2500)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">2.5K</div>
                        <div class="text-xs text-blue-300 mt-1">BASIC</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">8.8€</div>
                            <div class="text-xs text-red-300 line-through">10€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(5000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">5K</div>
                        <div class="text-xs text-red-400 mt-1">MÁS POPULAR</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">12.8€</div>
                            <div class="text-xs text-red-300 line-through">15€</div>
                        </div>

                    </button>
                    <button type="button" onclick="selectFollowers(10000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">10K</div>
                        <div class="text-xs text-purple-300 mt-1">PREMIUM</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">38.8€</div>
                            <div class="text-xs text-red-300 line-through">45€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(20000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">20K</div>
                        <div class="text-xs text-purple-300 mt-1">PREMIUM</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">74.8€</div>
                            <div class="text-xs text-red-300 line-through">84.9€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(35000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">35K</div>
                        <div class="text-xs text-yellow-300 mt-1">VIP</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">110€</div>
                            <div class="text-xs text-red-300 line-through">130.9€</div>
                        </div>
                    </button>
                    <button type="button" onclick="selectFollowers(50000)"
                        class="followers-option p-4 bg-white/10 border border-white/20 rounded-xl text-center hover:bg-opacity-20 transition-all duration-300">
                        <div class="text-2xl font-bold text-white">50K</div>
                        <div class="text-xs text-yellow-300 mt-1">VIP</div>
                        <div class="flex items-center justify-around mt-2">
                            <div class="text-sm text-gray-300">135€</div>
                            <div class="text-xs text-red-300 line-through">150.9€</div>
                        </div>
                    </button>
                </div>
                <input type="hidden" id="selectedFollowers" name="followers" required />
            </div>

            <!-- Email Input -->
            <div>
                <label for="modalEmail" class="block text-white font-medium mb-2">
                    📧 Tu Email
                </label>
                <input type="email" id="modalEmail" name="email" placeholder="tu@email.com"
                    class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300"
                    required />
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 pt-4">
                <button type="submit"
                    class="flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white font-bold rounded-xl hover:scale-105 transform transition-all duration-300 shadow-2xl">
                    🚀 Continuar
                </button>
            </div>

            <!-- Benefits -->
            <div class="bg-white/20 border border-white/30 rounded-xl p-4 space-y-4">

                <div class="bg-blue-500/20 border border-blue-500/30 rounded-xl p-4">
                    <ul class="text-blue-300 text-sm space-y-1">
                        <li><strong>WklySocial cumple plenamente con los términos de servicio de TikTok, Instagram y
                                Google Ads. Nuestro enfoque evita la automatización, las interacciones falsas y
                                cualquier acceso no autorizado a las cuentas de los usuarios.</strong></li>
                        <li>Mejoramos la visibilidad de tu perfil compartiendo tu contenido manualmente con una red
                            global de socios, que incluye creadores reales, plataformas móviles, grupos de influencers y
                            comunidades especializadas. El volumen que selecciones determinará el nivel de exposición
                            que obtendrás a través de estas colaboraciones.</li>
                    </ul>
                </div>

                <div class="bg-gray-500/20 border border-gray-500/30 rounded-xl p-4">
                    <h3 class="text-gray-200 font-semibold mb-2 flex items-center">
                        <span class="mr-2">📄</span>
                        Aviso legal:
                    </h3>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li>La visibilidad está determinada por la calidad de tu contenido, su pertinencia dentro del
                            nicho y la constancia en la publicación. Aunque Rehype pone a tu disposición recursos para
                            mejorar la visibilidad, no podemos asegurar resultados concretos en cuanto a métricas, como
                            la cantidad de seguidores o el grado de interacción.</li>
                    </ul>
                </div>

            </div>
        </form>
    </div>
</div>

<!-- Modal de Pago -->
<div id="paymentModal"
    class="hidden fixed inset-0 z-[70] flex items-center justify-center bg-black/50 backdrop-blur-sm overflow-y-auto">
    <div
        class="mx-4 my-8 h-[90%] overflow-y-scroll w-full max-w-2xl bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20 p-8 animate-scale-in">
        <!-- Modal Header -->
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">💳</div>
            <h2 class="text-3xl font-bold text-white mb-2">Finalizar Pedido</h2>
            <p class="text-gray-300">Completa tu pago y comienza a recibir seguidores</p>
        </div>

        <form id="payment-form" class="space-y-6">

            <!-- Order Summary -->
            <div class="bg-white/5 rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                    <span class="mr-3">📋</span>
                    Resumen del Pedido
                </h3>
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl" id="payment-platform-icon">🎵</span>
                            <div>
                                <div class="text-white font-medium" id="payment-username">@usuario</div>
                                <div class="text-gray-300 text-sm" id="payment-platform">TikTok</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-white font-bold" id="payment-followers">1,000 Seguidores</div>
                            <div class="text-green-300 text-sm" id="payment-price">GRATIS</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card Information -->
            <div class="bg-white/5 rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                    <span class="mr-3">💳</span>
                    Información de la Tarjeta
                </h3>

                <div class="space-y-4">
                    <!-- Card Number -->
                    <div>
                        <label for="card-number" class="block text-white font-medium mb-2">
                            Número de Tarjeta
                        </label>
                        <div class="relative">
                            <div id="card-number"
                                class="w-full px-4 py-3 bg-white/40 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300">
                            </div>
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                                <div id="cardType" class="text-2xl">💳</div>
                            </div>
                        </div>
                    </div>

                    <!-- Expiry and CVV -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label for="card-expiry" class="block text-white font-medium mb-2">
                                F. Caducidad
                            </label>
                            <div id="card-expiry"
                                class="w-full px-4 py-3 bg-white/40 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label for="card-cvc" class="block text-white font-medium mb-2">
                                CVV
                            </label>
                            <div id="card-cvc"
                                class="w-full px-4 py-3 bg-white/40 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300">
                            </div>
                        </div>
                    </div>

                    <!-- Cardholder Name -->
                    <div>
                        <label for="card-name" class="block text-white font-medium mb-2">
                            Nombre del Titular
                        </label>
                        <input type="text" id="card-name" name="card-name" placeholder="Juan Pérez"
                            class="w-full px-4 py-3 bg-white/40 border border-white/30 rounded-xl text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300"
                            required>
                    </div>
                </div>
            </div>

            <!-- Terms and Conditions -->
            <div class="bg-white/5 rounded-xl p-6">
                <div class="flex items-start space-x-4">
                    <input type="checkbox" id="acceptTerms" name="acceptTerms" class="checkbox-custom mt-1" required>
                    <div class="flex-1">
                        <label for="acceptTerms" class="text-white font-medium cursor-pointer">
                            Acepto los términos y condiciones
                        </label>
                        <p class="text-gray-300 text-sm mt-2">
                            Al marcar esta casilla, acepto los
                            <a href="/terms" target="_blank"
                                class="text-pink-300 hover:text-pink-200 underline">Términos y Condiciones</a>,
                            la <a href="/privacity" target="_blank"
                                class="text-pink-300 hover:text-pink-200 underline">Política de Privacidad</a>.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Security Notice -->
            <div class="bg-green-500/20 border border-green-500/30 rounded-xl p-4">
                <div class="flex items-start space-x-3">
                    <span class="text-2xl">🔒</span>
                    <div>
                        <h4 class="text-green-200 font-semibold mb-2">Pago 100% Seguro</h4>
                        <ul class="text-green-300 text-sm space-y-1">
                            <li>• Soporte 24/7 horas</li>
                            <li>• Datos encriptados con SSL</li>
                            <li>• Sin cargos ocultos</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Total -->
            <div class="bg-white/10 rounded-xl p-6 border border-white/20">
                <div class="flex justify-between items-center">
                    <div>
                        <h4 class="text-white font-semibold text-lg">Total a Pagar</h4>
                    </div>
                    <div class="text-right">
                        <div id="total-pay" class="text-2xl font-bold text-white">€1.00</div>
                    </div>
                </div>
                <div class="flex justify-around items-center flex-wrap mt-4 gap-2">
                    <div
                        class="flex items-center text-white text-xs px-3 py-1 bg-gradient-to-r from-pink-500/30 via-purple-500/30 to-indigo-500/30 text-white rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z" />
                        </svg>
                        <p class="pl-1">Transacción segura</p>
                    </div>
                    <div
                        class="flex items-center text-white text-xs px-3 py-1 bg-gradient-to-r from-pink-500/30 via-purple-500/30 to-indigo-500/30 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
                        </svg>
                        <p class="pl-1">Cifrado SSL seguro</p>
                    </div>
                    <div
                        class="flex items-center text-white text-xs px-3 py-1 bg-gradient-to-r from-pink-500/30 via-purple-500/30 to-indigo-500/30 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z" />
                        </svg>
                        <p class="pl-1">Servicio garantizado</p>
                    </div>
                </div>
            </div>

            <div id="errorMessage"
                class="hidden text-red-300 text-sm bg-red-500/20 p-4 rounded-xl border border-red-400/30">

            </div>

            <div id="SuccessMessage"
                class="hidden text-green-300 text-sm bg-green-500/20 p-4 rounded-xl border border-green-400/30">

            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 pt-4">
                <button type="button" onclick="backToFollowersModal()"
                    class="flex-1 px-6 py-3 bg-gray-600/50 text-white font-semibold rounded-xl hover:bg-opacity-70 transition-all duration-300">
                    ← Volver
                </button>
                <button id="btn-pay" type="submit"
                    class="flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold rounded-xl hover:scale-105 transform transition-all duration-300 shadow-2xl">
                    💳 Procesar Pago
                </button>
            </div>
        </form>
    </div>
</div>

<div id="loaderModal"
    class="hidden opacity-0 fixed inset-0 z-[70] flex items-center justify-center bg-black/70 backdrop-blur-sm transition-opacity duration-200"
    role="dialog" aria-modal="true" aria-labelledby="loaderTitle">
    <div class="mx-4 w-full max-w-sm rounded-2xl border border-white/20 bg-white/10 p-6 text-center shadow-xl">
        <div class="mx-auto mb-4 h-12 w-12 rounded-full border-4 border-pink-400/40 border-t-transparent animate-spin">
        </div>
        <h2 id="loaderTitle" class="text-white text-lg font-semibold mb-1">
            Procesando
        </h2>
        <p data-loader-text class="text-gray-200 text-sm">
            Por favor, espera un momento... <br>
            <span class="pt-3">No recargues la ventana</span>
        </p>
    </div>
</div>

<script src="https://js.stripe.com/v3/"></script>
<!-- Logica Pagos -->
<script>
    window.addEventListener('load', () => {
        const stripe =  Stripe(import.meta.env.PUBLIC_STRIPE_PK);
        const appearance = {
            theme: 'night',
            variables: {
                fontFamily: 'Sohne, system-ui, sans-serif',
                fontWeightNormal: '500',
                borderRadius: '8px',
                colorBackground: '#0A2540',
                colorPrimary: '#EFC078',
                accessibleColorOnColorPrimary: '#1A1B25',
                colorText: 'white',
                colorTextSecondary: 'white',
                colorTextPlaceholder: '#ABB2BF',
                tabIconColor: 'white',
                logoColor: 'dark'
            },
            rules: {
                '.Input': {
                backgroundColor: '#212D63',
                border: '1px solid var(--colorPrimary)'
                }
            }
            };
        const elements = stripe.elements({ appearance });

        const cardNumber = elements.create("cardNumber");
        cardNumber.mount("#card-number");

        const cardExpiry = elements.create("cardExpiry");
        cardExpiry.mount("#card-expiry");

        const cardCvc = elements.create("cardCvc");
        cardCvc.mount("#card-cvc");

        const form = document.getElementById("payment-form");

        if (!form) return; // Evita el error de null

        form.addEventListener("submit", async (e:any) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const orderData = JSON.parse(localStorage.getItem('orderData') as string);

            // // Show loading state
            const button = document.querySelector<HTMLButtonElement>('#btn-pay');
            const errormessage = document.getElementById("errorMessage");

            if (!errormessage || !button) return;
            errormessage.classList.add("hidden")

            showLoader();
            const originalText = button.innerHTML;
            button.innerHTML =
                 '<span class="flex items-center justify-center space-x-2"><span class="animate-spin">⏳</span><span>Validando tarjeta...</span></span>';
            button.disabled = true;

            // Validate terms acceptance
            if (!formData.get('acceptTerms')) {
                errormessage.textContent = `🚨: Debes aceptar los terminos`;
                errormessage.classList.add("text-red-300", "text-sm", "bg-red-500/20", "p-4", "rounded-xl", "border", "border-red-400/30");
                errormessage.classList.remove("hidden")
                button.innerHTML = originalText;
                button.disabled = false;
                hideLoader();
                return;
            }

            
            // Validate card name
            if(!formData.get('card-name')){
                errormessage.textContent = `🚨: Nombre del Titular es requerido`;
                errormessage.classList.add("text-red-300", "text-sm", "bg-red-500/20", "p-4", "rounded-xl", "border", "border-red-400/30");
                errormessage.classList.remove("hidden")
                button.innerHTML = originalText;
                button.disabled = false;
                hideLoader();
                return;
            }
            
            const { paymentMethod, error } = await stripe.createPaymentMethod({
                type: "card",
                card: cardNumber,
            });
            
            if (error) {
                errormessage.textContent = `🚨: ${error.message}`;
                errormessage.classList.add("text-red-300", "text-sm", "bg-red-500/20", "p-4", "rounded-xl", "border", "border-red-400/30");
                errormessage.classList.remove("hidden")
                button.innerHTML = originalText;
                button.disabled = false;
                hideLoader();
             return;
            }
            const res = await checkout_product(paymentMethod, originalText, formData.get('card-name')?.toString());
        });
    })

    async function getToken() {
        const res = await fetch(`${import.meta.env.PUBLIC_API}/token`);

        if (!res.ok) {
            return false
        }

        const data = await res.json();
        return data.token; // O la propiedad que te envíe el token
    }

    async function checkout_product(paymentMethod:any, originalText:any, cardName:any) {
        const token = await getToken();

        const orderData = JSON.parse(localStorage.getItem("orderData") as string);
        const button = document.querySelector<HTMLButtonElement>('#btn-pay');
        const errormessage = document.getElementById("errorMessage");
        const successmessage = document.getElementById("SuccessMessage");
        if (!button ||!errormessage||!successmessage) return;
        successmessage.classList.add("hidden")
        errormessage.classList.add("hidden")

        if (!token) {
            errormessage.classList.remove("hidden")
            errormessage.textContent = "Ocurrió un error, intentarlo más tarde";
            button.innerHTML = originalText;
            button.disabled = false;
            hideLoader();
            return;
        }


        const res = await fetch(`${import.meta.env.PUBLIC_API}/checkout`,
            {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${token}`,
                },
                body: JSON.stringify({
                    paymentMethodId: paymentMethod.id,
                    cardName:cardName.toLowerCase().trim(),
                    username:orderData.username.toLowerCase().trim(),
                    email: orderData.email.toLowerCase().trim(),
                    platform: orderData.platform.toLowerCase().trim(),
                    quantity: orderData.followers
                }),
            },
        );
        const data = await res.json();
        if (!res.ok) {
            errormessage.classList.remove("hidden")
            errormessage.textContent = data.detail;
            button.innerHTML = originalText;
            button.disabled = false;
            hideLoader();
            return;
        }

        if (data.error) {
            errormessage.classList.remove("hidden")
            errormessage.textContent = data.error;
            button.innerHTML = originalText;
            button.disabled = false;
            hideLoader();
            return;
        } else {
            (document.getElementById('formFollowers') as HTMLFormElement).reset()
            // Simulate form processing
            setTimeout(() => {
                window.location.href = "confirmation-success";
            }, 2000);
            localStorage.setItem("url",data.url)
            successmessage.classList.remove("hidden")
            successmessage.textContent = data.message;
            button.innerHTML = originalText;
            button.disabled = false;
            hideLoader();
        }
    }

    function showLoader(message = "Procesando solicitud...") {
        const modal = document.getElementById("loaderModal") as HTMLDivElement;
        const label = modal.querySelector("[data-loader-text]");
        if (label) label.textContent = message;

        modal.classList.remove("hidden");
        requestAnimationFrame(() => {
            modal.classList.remove("opacity-0");
        });

        // Bloquea el scroll de fondo
        document.body.classList.add("overflow-hidden");
    }

    function hideLoader() {
        const modal = document.getElementById("loaderModal") as HTMLDivElement;
        modal.classList.add("opacity-0");
        setTimeout(() => {
            modal.classList.add("hidden");
            document.body.classList.remove("overflow-hidden");
        }, 200); // sincronizado con transition-opacity
    }
</script>

<!-- Hero Form -->
<script is:inline>

        // Hero input Submit
        document.getElementById('heroForm').addEventListener('submit', function(e) {
            e.preventDefault();
            openModal();
        });

        // Auto-add @ symbol to input
        document.getElementById('usernameInput').addEventListener('input', function(e) {
            let value = e.target.value;
            
            // If the input is empty or doesn't start with @, add it
            if (value.length === 0 || !value.startsWith('@')) {
                // If user typed something but no @, add @ at the beginning
                if (value.length > 0 && !value.startsWith('@')) {
                    e.target.value = '@' + value;
                }
                // If input is empty and user starts typing, add @
                else if (value.length === 0) {
                    e.target.value = '@';
                }
            }
            
            // Prevent user from deleting the @ symbol
            if (value.length > 0 && !value.startsWith('@')) {
                e.target.value = '@' + value.replace('@', '');
            }
        });

        // Handle keydown to prevent deleting @ at position 0
        document.getElementById('usernameInput').addEventListener('keydown', function(e) {
            const input = e.target;
            const cursorPosition = input.selectionStart;
            
            // Prevent deleting @ if cursor is at position 0 or 1 and user presses backspace/delete
            if ((e.key === 'Backspace' || e.key === 'Delete') && cursorPosition <= 1) {
                e.preventDefault();
                // Keep cursor after @
                setTimeout(() => {
                    input.setSelectionRange(1, 1);
                }, 0);
            }
        });

        // Set initial @ when input gets focus
        document.getElementById('usernameInput').addEventListener('focus', function(e) {
            if (e.target.value === '') {
                e.target.value = '@';
                // Position cursor after @
                setTimeout(() => {
                    e.target.setSelectionRange(1, 1);
                }, 0);
            }
        });

        // Platform selection
        function selectPlatform(platform) {
            selectedPlatform = platform;
            
            // Remove active class from all buttons
            document.querySelectorAll('.platform-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-gradient-to-r', 'from-pink-500/30', 'to-purple-500/30', 'border-2', 'border-pink-400/50');
            });
            
            // Add active class to selected button
            const selectedBtn = document.getElementById(platform + '-btn');
            selectedBtn.classList.add('active', 'bg-gradient-to-r', 'from-pink-500/30', 'to-purple-500/30', 'border-2', 'border-pink-400/50');
            
            // Update input placeholder and icon
            const input = document.getElementById('usernameInput');
            const icon = document.getElementById('platform-icon');
            
            if (platform === 'instagram') {
                input.placeholder = '@ingresa usuario instagram';
                icon.textContent = '📸';
                document.querySelector("#PriceInsta").classList.remove("hidden");
                document.querySelector("#PriceTiktok").classList.add("hidden");
            } else if (platform === 'tiktok') {
                input.placeholder = '@ingresa usuario tiktok';
                icon.textContent = '🎵';
                document.querySelector("#PriceInsta").classList.add("hidden");
                document.querySelector("#PriceTiktok").classList.remove("hidden");
            }
            
        }

</script>

<!-- Modal Seguidores -->
<script is:inline>

    // Variables para el modal de seguidores
        let selectedFollowersCount = null;
        let selectedPlatform = 'tiktok'; // Default platform

        // Form Seguidores Submit
        document.getElementById('formFollowers').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('modalEmail').value.trim();
            const username = document.getElementById('usernameInput').value.trim();
            
            if (!selectedFollowersCount) {
                alert('Por favor, selecciona la cantidad de seguidores');
                return;
            }
            
            if (!email) {
                alert('Por favor, ingresa tu email');
                return;
            }
            
            // Clean username
            const cleanUsername = username.startsWith('@') ? username.slice(1) : username;
            
            // Store all data
            localStorage.setItem('orderData', JSON.stringify({
                username: cleanUsername,
                platform: selectedPlatform,
                followers: selectedFollowersCount,
                email: email,
                timestamp: new Date().toISOString()
            }));
            
            // Close followers modal and open payment modal
            closeModal();
            openPaymentModal();
        });

        // Close followers modal when clicking outside
        document.getElementById('followersModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });


        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        

        // Función para seleccionar cantidad de seguidores
        function selectFollowers(count) {
            selectedFollowersCount = count;
            document.getElementById('selectedFollowers').value = count;
            
            // Remove active class from all options
            document.querySelectorAll('.followers-option').forEach(option => {
                option.classList.remove('bg-gradient-to-r', 'from-pink-500/30', 'to-purple-500/30','border-pink-400/50');
            });
            
            // Add active class to selected option
            event.target.closest('.followers-option').classList.add('bg-gradient-to-r', 'from-pink-500/30', 'to-purple-500/30', 'border-pink-400/50');
        }

        // Función para abrir el modal de seguidores
        function openModal() {
            const username = document.getElementById('usernameInput').value.trim();
            
            if (!username || username === '@') {
                alert(`Por favor, ingresa un usuario de ${selectedPlatform === 'instagram' ? 'Instagram' : 'TikTok'}`);
                return;
            }
            
            // Update modal with user data
            document.getElementById('modal-username').textContent = username;
            document.getElementById('modal-platform-icon').textContent = selectedPlatform === 'instagram' ? '📸' : '🎵';
            
            // Show modal
            document.getElementById('followersModal').classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        // Función para cerrar el modal de seguidores
        function closeModal() {
            document.getElementById('followersModal').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            
            // Reset form
            document.getElementById('formFollowers').reset();
            selectedFollowersCount = null;
            
            // Remove active classes
            document.querySelectorAll('.followers-option').forEach(option => {
                option.classList.remove('bg-gradient-to-r', 'from-pink-500/30', 'to-purple-500/30', 'border-pink-400/50');
            });
        }

</script>

<!-- Funciones Modal Pago -->
<script is:inline>

        // Función para abrir modal de pago
        function openPaymentModal() {
            const orderData = JSON.parse(localStorage.getItem('orderData'));
            
            if (!orderData) {
                alert('Error: No se encontraron datos del pedido');
                return;
            }
            
            // Update payment modal with order data
            document.getElementById('payment-username').textContent = '@' + orderData.username;
            document.getElementById('payment-platform').textContent = orderData.platform === 'instagram' ? 'Instagram' : 'TikTok';
            document.getElementById('payment-platform-icon').textContent = orderData.platform === 'instagram' ? '📸' : '🎵';
            document.getElementById('payment-followers').textContent = orderData.followers.toLocaleString() + ' Seguidores';
            
            // Set price based on followers
            let basePrice = 'GRATIS';
            if (orderData.followers > 400) {
                if(orderData.platform === 'instagram'){
                    const priceMapInsta = {
                        500:'€1.9',
                        1000:'€3.9',
                        2500:'€7',
                        5000:'€12.9',
                        10000:'€25.9',
                        20000:'€45.9',
                        35000:'€53',
                        50000:'€75.9'
                    };
                    basePrice = priceMapInsta[orderData.followers] || '€29.99';
                }else{
                    const priceMapTiktok = {
                        500:'€2.9',
                        1000:'€5.9',
                        2500:'€8.9',
                        5000:'€12.9',
                        10000:'€38.9',
                        20000:'€74.9',
                        35000:'€110',
                        50000:'€135'
                    };
                    basePrice = priceMapTiktok[orderData.followers] || '€29.99';
                }
            }
            document.getElementById('payment-price').textContent = basePrice;
            document.getElementById('total-pay').textContent = basePrice;
            // Show payment modal
            document.getElementById('paymentModal').classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        // Función para volver al modal de seguidores
        function backToFollowersModal() {
                closePaymentModal();
                document.getElementById('followersModal').classList.remove('hidden');
                document.body.classList.add('overflow-hidden'); // Ensure body overflow is handled
        }

        // Close payment modal when clicking outside
        document.getElementById('paymentModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closePaymentModal();
                }
        });

        // Función para cerrar modal de pago
        function closePaymentModal() {
                document.getElementById('paymentModal').classList.add('hidden');
                document.body.classList.remove('overflow-hidden');
                
                // Reset form
                document.getElementById('payment-form').reset();
        }
</script>
